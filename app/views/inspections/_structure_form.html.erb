<%= render 'form/form_context', model: @inspection.structure_assessment, i18n_base: 'forms.structure', url: inspection_structure_assessment_path(@inspection) do |form| %>
  <!-- Fabric and Construction -->
      <%= render 'form/fieldset', legend_key: 'fabric_construction' do %>
        <%= render 'form/pass_fail_comment', field: :seam_integrity_pass %>
        <%= render 'form/pass_fail_comment', field: :uses_lock_stitching_pass %>
        <%= render 'form/number_pass_fail_comment', field: :stitch_length %>
        <%= render 'form/pass_fail_comment', field: :air_loss_pass %>
        <%= render 'form/pass_fail_comment', field: :straight_walls_pass %>
        <%= render 'form/pass_fail_comment', field: :sharp_edges_pass %>
      <% end %>

      <!-- Structural Safety and Measurements -->
      <%= render 'form/fieldset', legend_key: 'structural_safety' do %>
        <%= render 'form/number_pass_fail_comment', field: :blower_tube_length %>
        <%= render 'form/pass_fail_comment', field: :unit_stable_pass %>
        <%= render 'form/number_pass_fail_comment', field: :evacuation_time %>
        <%= render 'form/number_pass_fail_comment', field: :step_ramp_size %>
        <%= render 'form/number_pass_fail_comment', field: :critical_fall_off_height %>
        <%= render 'form/number_pass_fail_comment', field: :unit_pressure %>
      <% end %>

      <%= render 'form/fieldset', legend_key: 'trough_assessment' do %>
        <%= render 'form/number_pass_fail_comment', field: :trough_depth %>
        <%= render 'form/number_pass_fail_comment', field: :trough_adjacent_panel_width %>
        <%= render 'form/pass_fail_comment', field: :trough_pass %>
      <% end %>

      <!-- Safety Compliance -->
      <%= render 'form/fieldset', legend_key: 'safety_compliance' do %>
        <%= render 'form/pass_fail_comment', field: :entrapment_pass %>
        <%= render 'form/pass_fail_comment', field: :markings_pass %>
        <%= render 'form/pass_fail_comment', field: :grounding_pass %>
      <% end %>

      <!-- Critical Failures Summary -->
      <% if @inspection.structure_assessment&.persisted? && @inspection.structure_assessment.has_critical_failures? %>
        <div class="critical-failures text-danger">
          <strong><%= t('forms.structure.summary.critical_failures') %>:</strong>
          <%= @inspection.structure_assessment.critical_failure_summary %>
        </div>
      <% end %>

  <!-- Safety Status -->
  <%= render 'form/assessment_status', assessment: @inspection.structure_assessment %>
<% end %>
