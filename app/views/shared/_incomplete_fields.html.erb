<%
  # Partial for showing incomplete assessment fields
  # Required locals:
  #   - assessment: The assessment object
  #   - assessment_type: The type of assessment (e.g., "user_height", "structure")
  
  incomplete_fields = assessment.incomplete_fields
  return if incomplete_fields.empty?
  
  details_id = "incomplete_fields_#{assessment_type}"
%>

<details id="<%= details_id %>" class="incomplete-fields-details">
  <summary class="incomplete-fields-summary">
    <%= t("assessments.incomplete_fields.show_details", count: incomplete_fields.count) %>
  </summary>
  
  <div class="incomplete-fields-content">
    <p><%= t("assessments.incomplete_fields.description") %></p>
    
    <ul class="incomplete-fields-list">
      <% incomplete_fields.each do |field_info| %>
        <li class="incomplete-field-item">
          <strong><%= field_info[:label] %></strong>
          <% case field_info[:type] %>
          <% when :pass_fail %>
            <span class="field-type"><%= t("assessments.incomplete_fields.needs_assessment") %></span>
          <% when :number %>
            <span class="field-type"><%= t("assessments.incomplete_fields.needs_number") %></span>
          <% else %>
            <span class="field-type"><%= t("assessments.incomplete_fields.needs_value") %></span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</details>