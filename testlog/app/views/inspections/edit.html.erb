<header>
  <h1><%= t('inspections.titles.edit') %></h1>
</header>

<article>
  <div class="inspection-edit-container">
    <!-- Inspection Overview -->
    <div class="inspection-overview">
      <h2><%= t('inspections.headers.overview') %></h2>
      <div class="overview-details">
        <div class="detail-item">
          <span class="label"><%= t('inspections.fields.unit_name') %>:</span>
          <span class="value"><%= @inspection.unit&.name || t('inspections.messages.no_unit') %></span>
        </div>
        <div class="detail-item">
          <span class="label"><%= t('inspections.fields.serial') %>:</span>
          <span class="value"><%= @inspection.unit&.serial || t('inspections.messages.not_specified') %></span>
        </div>
        <div class="detail-item">
          <span class="label"><%= t('inspections.fields.status') %>:</span>
          <span class="value"><%= @inspection.status&.humanize || t('inspections.status.draft') %></span>
        </div>
        <div class="detail-item">
          <span class="label"><%= t('inspections.fields.progress') %>:</span>
          <span class="value"><%= "#{assessment_completion_percentage(@inspection)}%" %></span>
        </div>
      </div>
    </div>

    <!-- Tab Navigation -->
    <nav class="inspection-tabs" data-inspection-id="<%= @inspection.id %>">
      <ul class="tab-list">
        <% inspection_tabs(@inspection).each do |tab| %>
          <li class="tab-item">
            <%= link_to t("inspections.tabs.#{tab}"), 
                edit_inspection_path(@inspection, tab: tab), 
                class: "tab-link #{'active' if current_tab == tab}", 
                data: { tab: tab } %>
          </li>
        <% end %>
      </ul>
    </nav>

    <!-- Tab Content -->
    <div class="tab-content">
      <% if current_tab == 'general' %>
        <%= render 'general_form' %>
      <% else %>
        <div class="assessment-placeholder">
          <h3><%= t("inspections.tabs.#{current_tab}") %> Assessment</h3>
          <p>This assessment form is coming soon. Currently only the General tab is implemented.</p>
          <p><%= link_to "Return to General", edit_inspection_path(@inspection), class: "btn btn-primary" %></p>
        </div>
      <% end %>
    </div>

    <!-- Actions -->
    <div class="inspection-actions">
      <%= button_to t('inspections.buttons.delete'), 
          inspection_path(@inspection), 
          method: :delete, 
          class: "btn btn-danger", 
          data: { confirm: t('inspections.messages.delete_confirm') } %>
    </div>
  </div>
</article>
